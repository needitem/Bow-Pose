# Bullseye: 자세 인식 기반 영상 녹화 및 리플레이 시스템

Bullseye는 MediaPipe를 활용하여 웹캠으로 사용자의 자세를 실시간으로 분석하고, 특정 자세(예: 양팔 벌리기)를 감지하면 자동으로 짧은 영상을 녹화하는 시스템입니다. 녹화된 영상은 Flask 웹 서버를 통해 실시간 스트리밍되며, 사용자는 웹 인터페이스에서 영상을 확인하고 특정 영상을 선택하여 리플레이할 수 있습니다. 녹화된 영상은 웹캠 영상과 함께 화면에 표시됩니다.

## 주요 기능

* **실시간 자세 인식:** MediaPipe Pose 모델을 사용하여 사용자의 자세를 정확하게 인식합니다.
* **자동 녹화:** 특정 자세(예: 양팔 벌리기)를 감지하면 자동으로 5초 동안 녹화를 시작합니다.
* **영상 리플레이:** 사용자는 녹화된 영상 목록에서 원하는 영상을 선택하여 리플레이할 수 있습니다.
* **웹 인터페이스:** Flask 웹 서버를 통해 사용자에게 실시간 영상 스트리밍 및 리플레이 기능을 제공합니다.
* **Pygame UI:** 녹화 상태, 실시간 영상, 녹화된 영상을 Pygame 기반 UI로 보여줍니다.
* **커스터마이징 가능:** 녹화 시간, 저장 경로, 감지할 자세 등을 사용자의 요구에 맞게 설정할 수 있습니다.
* **오류 로깅:** werkzeug 로거 설정을 통해 불필요한 로그를 제거하고 에러 로그만 표시합니다.

## 기술 스택

* **Python:** 주요 프로그래밍 언어
* **OpenCV:** 영상 처리
* **MediaPipe:** 자세 인식
* **Flask:** 웹 서버 및 영상 스트리밍
* **Pygame:** UI 구현
* **Numpy:** 수치 연산
* **Threading:** 멀티스레딩
* **Datetime:** 시간 관련 기능
* **OS:** 파일 및 디렉토리 관리
* **Logging:** 로깅

## 설치 및 실행 방법

1. 필요한 라이브러리 설치:

```bash
pip install opencv-python mediapipe flask pygame numpy


2. 저장 폴더 생성
'''bash
mkdir replay

3. 실행:

```bash
python server.py

4. 웹 브라우저에서 `http://localhost:5001` 접속


추가 정보

본 프로젝트는 샘플 자세(양팔 벌리기)를 기준으로 동작합니다. 다른 자세를 감지하려면 calculate_angle 함수 및 관련 로직을 수정해야 합니다.
RECORDING_DURATION, REPLAY_FOLDER 등의 변수를 수정하여 녹화 시간, 저장 경로 등을 변경할 수 있습니다.
TOGGLE_DRAWING 변수를 True로 변경하면 웹캠 영상에 자세 인식 결과를 시각화할 수 있습니다.

주의사항

현재는 .avi 확장자를 사용하여 영상을 저장합니다. 필요에 따라 다른 확장자를 사용할 수 있습니다.
웹캠 캡처 스레드와 Pygame 스레드는 독립적으로 실행됩니다. 이는 시스템 성능에 영향을 미칠 수 있습니다.

개선 방향

사용자 인터페이스 개선
다양한 자세 감지 기능 추가
녹화된 영상 편집 기능 추가
클라우드 스토리지 연동
